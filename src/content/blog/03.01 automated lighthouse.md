---
slug: "03-01"
title: "03.01 Automated Lighthouse"
description: " Automated Lighthouse"
pubDate: "09-25-2025"
author: "Chad Oakenfold"
updatedDate: "09-25-2025"
---

## `./scripts/lighthouse.mjs`

Excerpt:

```javascript
// Configuration
const CONFIG = {
  sitemapPath: "./dist/sitemap-0.xml",
  outputDir: `./__generated__/lighthouse/${timestampFilename}`,
  runs: 3, // Number of runs to perform for each URL
  cooldownMs: 2000, // Cooldown between runs in milliseconds
  thresholds: {
    TBT: { max: 0, violationHandler: "console.error" }, // Total Blocking Time
    LCP: { max: 1514, violationHandler: "console.error" }, // Largest Contentful Paint
    CLS: { max: 0.0, violationHandler: "console.error" }, // Cumulative Layout Shift
    FCP: { max: 1514, violationHandler: "console.error" }, // First Contentful Paint
    SI: { max: 1514, violationHandler: "console.error" }, // Speed Index
  },
  chromeFlags: ["--headless", "--disable-gpu", "--no-sandbox"],
  lighthouseOptions: {
    logLevel: "error",
    output: "json",
    onlyCategories: ["performance"],
  },
};
```

## Run

```
npm run test:performance
```

## Output

```javascript
{
  "totalUrls": 5,
  "runsPerUrl": 3,
  "passedUrls": 4,
  "failedUrls": 1,
  "totalViolations": 1,
  "timestamp": "2025-09-26T02:21:07.384Z",
  "results": [
    {
      "url": "https://blog.oakenfold.ca/",
      "/": "https://googlechrome.github.io/lighthouse/scorecalc/#FCP=839&SI=998&LCP=839&TBT=0&CLS=0&device=mobile&version=10",
      "passed": true,
      "violationCount": 0,
      "medianLighthouseScore": 99,
      "medianMetrics": {
        "TBT": 0,
        "LCP": 839,
        "CLS": 0,
        "FCP": 839,
        "SI": 998
      },
      "totalRuns": 3,
      "successfulRuns": 3
    },
    {
      "url": "https://blog.oakenfold.ca/blog/",
      "/blog": "https://googlechrome.github.io/lighthouse/scorecalc/#FCP=814&SI=814&LCP=814&TBT=0&CLS=0&device=mobile&version=10",
      "passed": true,
      "violationCount": 0,
      "medianLighthouseScore": 100,
      "medianMetrics": {
        "TBT": 0,
        "LCP": 814,
        "CLS": 0,
        "FCP": 814,
        "SI": 814
      },
      "totalRuns": 3,
      "successfulRuns": 3
    },
    {
      "url": "https://blog.oakenfold.ca/blog/01-01/",
      "/blog/01-01/": "https://googlechrome.github.io/lighthouse/scorecalc/#FCP=825&SI=825&LCP=825&TBT=0&CLS=0.001&device=mobile&version=10",
      "passed": false,
      "violationCount": 1,
      "medianLighthouseScore": 100,
      "medianMetrics": {
        "TBT": 0,
        "LCP": 825,
        "CLS": 0.001,
        "FCP": 825,
        "SI": 825
      },
      "totalRuns": 3,
      "successfulRuns": 3
    },
    {
      "url": "https://blog.oakenfold.ca/blog/02-01/",
      "/blog/02-01/": "https://googlechrome.github.io/lighthouse/scorecalc/#FCP=831&SI=831&LCP=831&TBT=0&CLS=0&device=mobile&version=10",
      "passed": true,
      "violationCount": 0,
      "medianLighthouseScore": 100,
      "medianMetrics": {
        "TBT": 0,
        "LCP": 831,
        "CLS": 0,
        "FCP": 831,
        "SI": 831
      },
      "totalRuns": 3,
      "successfulRuns": 3
    },
    {
      "url": "https://blog.oakenfold.ca/blog/03-01/",
      "/blog/03-01/": "https://googlechrome.github.io/lighthouse/scorecalc/#FCP=837&SI=837&LCP=837&TBT=0&CLS=0&device=mobile&version=10",
      "passed": true,
      "violationCount": 0,
      "medianLighthouseScore": 100,
      "medianMetrics": {
        "TBT": 0,
        "LCP": 837,
        "CLS": 0,
        "FCP": 837,
        "SI": 837
      },
      "totalRuns": 3,
      "successfulRuns": 3
    }
  ]
}
```

## Links

- [03-01](https://googlechrome.github.io/lighthouse/scorecalc/#FCP=841&SI=841&LCP=841&TBT=0&CLS=0&device=mobile&version=10)
- [03-01](https://googlechrome.github.io/lighthouse/scorecalc/#FCP=829&SI=829&LCP=829&TBT=0&CLS=0&device=mobile&version=10)
- [03-01](https://googlechrome.github.io/lighthouse/scorecalc/#FCP=835&SI=835&LCP=835&TBT=0&CLS=0.001&device=mobile&version=10)
- [03-01](https://googlechrome.github.io/lighthouse/scorecalc/#FCP=836&SI=836&LCP=836&TBT=0&CLS=0&device=mobile&version=10)
- [03-01](https://googlechrome.github.io/lighthouse/scorecalc/#FCP=837&SI=837&LCP=837&TBT=0&CLS=0&device=mobile&version=10)

## 100s

100s
