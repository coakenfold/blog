## Summary: what we have now

- Can configure where we collect Analytics from, the Frontend or the Backend
- Have a Performance Budget script

## Analytics from the Frontend

Analytics on the Frontend could be useful for realtime data, heat maps, 'for free' client ids. Downside with FE analytics is the JS use increases and there is third party code.

## Analytics from the Backend

Analytics on the Backend can happen if there is a small script on the Frontend that passes WebVitals to an api. The BE can then send those off to Google Analytics or save them to our own database. Negligible JS increase. Downside is we have to manage rate limits, generating reliable client ids, and don't get fancy analytics like heat maps.

### Configuring Analytics

In `.env.development`, `.env.production` options are:

```
PUBLIC_GA_ID GA4 property ID
PUBLIC_ENABLE_ANALYTICS boolean
PUBLIC_ENABLE_ANALYTICS_FE boolean
PUBLIC_ENABLE_ANALYTICS_BE boolean
ANALYTICS_SECRETS file path to GA4 API key
```

## Node/CICD Performance Budget Monitoring

Node script that uses the sitemap.xml file to gather Lighthouse Performance data. It flags when violations occur. Saves each page json and a summary json of the run.

- Total Blocking Time (TBT) max 0ms
- Largest Contentful Paint (LCP) max 1,514 ms
- Cumulative Layout Shift (CLS) max 0.0
- First Contentful Paint (FCP) max 1,514 ms
- Speed Index (SI) max 1,514 ms

```
npm run test:performance
```
